<ion-header>

  <div class="branding">
    <img id="logo" class="title-image" src="assets/img/iconslogos/logo.svg" />
    <img id="bubbles" class="title-image" src="assets/img/iconslogos/bubbles.png" />
  </div>

  <ion-navbar>

    <ion-title>{{currentPatient.name}}'s Environments</ion-title>

    <ion-buttons right>
      <button ion-button padding (click)="togglePopup()">
        Add environment
      </button>
    </ion-buttons>

  </ion-navbar>

  <ion-grid *ngIf="isPopup" [ngClass]="animationClasses" [@slowFading]>

    <h1 padding class="card-title">Add new environment</h1>
    <ion-row wrap>
      <ion-col col-3 *ngFor="let popItem of db.C.BACKGROUNDTHUMBS; let i = index;">

        <img padding [src]="'assets/img/' + popItem.category + popItem.imgUrl" (click)="addEnvironment(popItem, i)" />
        <p ion-text color="IDAGrey">{{popItem.name}}</p>

      </ion-col>
    </ion-row>
  </ion-grid>

</ion-header>



<ion-content overflow-scroll="true" class="card-background-page" (click)="closePopup()">
<!-- {{ db.C.environments}} -->
  <ion-grid padding>

    <ion-row wrap>

      <ion-col col-4 *ngFor="let item of db.environments; let i = index;">
        <ion-card>

          <!-- FIXME: another place for delete button -->
          <ion-icon name="close" (click)="deleteEnvironment(item, i)" color="danger"></ion-icon>

          <!-- FIXME: change category names and uses then in url -->
          <img [src]="'assets/img/background'+ item.imgUrl" (click)="openPage(item, patientid, i)" />

          <ion-list>
            <ion-item-sliding #slidingItem>

              <ion-item class="card-title">{{item.name}}</ion-item>

              <ion-item-options>

                <button ion-button padding (click)="editEnvironment(item, slidingItem)" color="light">
                  <ion-icon name="paper"></ion-icon>
                </button>

                <button ion-button padding (click)="deleteEnvironment(item, i)" color="danger">
                  <ion-icon name="trash"></ion-icon>
                </button>

              </ion-item-options>

            </ion-item-sliding>

          </ion-list>
        </ion-card>
      </ion-col>

    </ion-row>

  </ion-grid>

</ion-content>
